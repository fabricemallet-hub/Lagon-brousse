
{
  "entities": {
    "UserAccount": {
      "title": "UserAccount",
      "type": "object",
      "description": "Represents a user profile with preferences and subscription status.",
      "properties": {
        "id": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "displayName": { "type": "string" },
        "role": { "type": "string", "enum": ["client", "professional", "admin"] },
        "subscriptionStatus": { "type": "string", "enum": ["active", "trial", "professional", "admin", "limited"] },
        "businessId": { "type": "string" },
        "selectedRegion": { "type": "string", "enum": ["CALEDONIE", "TAHITI"] },
        "lastSelectedLocation": { "type": "string" },
        "subscribedCategories": { "type": "array", "items": { "type": "string" } },
        "allowsPromoPush": { "type": "boolean" },
        "allowsPromoEmails": { "type": "boolean" },
        "allowsPromoSMS": { "type": "boolean" }
      },
      "required": ["id", "email", "subscriptionStatus"]
    },
    "Business": {
      "title": "Business",
      "type": "object",
      "description": "Represents a professional partner shop.",
      "properties": {
        "id": { "type": "string" },
        "ownerId": { "type": "string" },
        "name": { "type": "string" },
        "commune": { "type": "string" },
        "categories": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["id", "ownerId", "name", "commune"]
    },
    "Promotion": {
      "title": "Promotion",
      "type": "object",
      "description": "An article or offer in a business catalog.",
      "properties": {
        "id": { "type": "string" },
        "businessId": { "type": "string" },
        "title": { "type": "string" },
        "price": { "type": "number" },
        "promoType": { "type": "string", "enum": ["Promo", "Nouvel Arrivage"] },
        "isOutOfStock": { "type": "boolean" }
      },
      "required": ["id", "businessId", "title", "price", "promoType"]
    },
    "Campaign": {
      "title": "Campaign",
      "type": "object",
      "description": "A marketing campaign sent by a business.",
      "properties": {
        "id": { "type": "string" },
        "businessId": { "type": "string" },
        "reach": { "type": "number" },
        "cost": { "type": "number" },
        "status": { "type": "string", "enum": ["pending", "sent", "draft"] }
      },
      "required": ["id", "businessId", "reach", "cost", "status"]
    },
    "AccessToken": {
      "title": "AccessToken",
      "type": "object",
      "description": "Represents a premium access token.",
      "properties": {
        "id": { "type": "string" },
        "status": { "type": "string", "enum": ["active", "redeemed"] },
        "durationMonths": { "type": "number" },
        "createdAt": { "type": "string", "format": "date-time" },
        "redeemedBy": { "type": "string" },
        "redeemedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "status", "durationMonths"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/backend/entities/UserAccount" },
      "description": "Private user profiles."
    },
    "/businesses/{businessId}": {
      "schema": { "$ref": "#/backend/entities/Business" },
      "description": "Public business information."
    },
    "/businesses/{businessId}/promotions/{promoId}": {
      "schema": { "$ref": "#/backend/entities/Promotion" },
      "description": "Articles belonging to a business."
    },
    "/campaigns/{campaignId}": {
      "schema": { "$ref": "#/backend/entities/Campaign" },
      "description": "Direct marketing campaigns."
    },
    "/access_tokens/{tokenId}": {
      "schema": { "$ref": "#/backend/entities/AccessToken" },
      "description": "Premium access tokens."
    }
  }
}
